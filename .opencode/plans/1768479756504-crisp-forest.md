# Plan: Update IMPLEMENTATION_PLAN.md for Phase 9 (Local LLM Integration)

## 1. Analysis
The user wants to detail Phase 9 of the implementation plan.
**Goal:** Integrate Local LLM for deep understanding of market questions.
**Infrastructure:**
- Server: LMStudio @ `http://192.168.1.227:1234`
- Models: `nvidia/nemotron-3-nano` and `mistralai/ministral-3-14b-reasoning`

**Current State:**
- `IMPLEMENTATION_PLAN.md` mentions "Phase 9" as Future/Local LLM Integration in the summary table.
- However, later in the file, it describes "Phase 10: Local LLM Integration (Future)".
- I need to consolidate this into a detailed "Phase 9" section, replacing the "Phase 10" LLM section (since Phase 10 is now WebSocket, or I should just fix the numbering).
- Actually, the file has "Phase 10: WebSocket" as Complete. And "Phase 9" as Future LLM. But the text describes LLM as Phase 10.
- I will renumber the LLM section to **Phase 9**, moving it before Phase 10 (WebSocket), or just keeping it as the next active phase. Since WebSocket is Phase 10 and "Complete", and LLM is Phase 9 and "In Progress/Future", it's slightly confusing.
- I will standardize:
    - Phase 9: Local LLM Integration (Active/Next)
    - Phase 10: WebSocket (Completed)

## 2. Proposed Content for Phase 9
### Phase 9: Local LLM Integration (Deep Understanding)
**Status:** ðŸ—ï¸ In Progress

**Goal:** Integrate Local LLM (via LMStudio) to parse complex market questions that Regex misses.

**Infrastructure:**
- **Provider:** LMStudio (OpenAI-compatible API)
- **Endpoint:** `http://192.168.1.227:1234/v1`
- **Models to Evaluate:**
    1. `nvidia/nemotron-3-nano` (Speed/Efficiency)
    2. `mistralai/ministral-3-14b-reasoning` (Reasoning capability)

**Implementation Steps:**
1.  **Dependencies:**
    - Add `openai` package (standard client for LMStudio).
2.  **New Component: `LLMProvider` (`poly_market_trader/api/llm_provider.py`)**
    - Manages connection to LMStudio at `http://192.168.1.227:1234/v1`.
    - Handles model switching between `nvidia/nemotron-3-nano` and `mistralai/ministral-3-14b-reasoning`.
    - Implements retries, timeouts, and JSON parsing.
3.  **New Service/Integration: `MarketMonitor` Integration**
    - Modify `poly_market_trader/services/market_monitor.py` to use `LLMProvider`.
    - Replace/Augment regex logic with LLM calls.
    - Implement fallback strategy (Nano -> Mistral -> Regex).
4.  **Testing & Benchmarking**
    - Create a benchmark script `scripts/test_llm_models.py`.
    - Compare accuracy/latency.

## 3. Plan to Update File
I will edit `IMPLEMENTATION_PLAN.md`:
1.  Update the **Executive Summary** table to mark Phase 9 as "Active".
2.  Replace the "Phase 10: Local LLM Integration (Future)" section with a detailed **"Phase 9: Local LLM Integration"** section.
    - This will include the specific IP address and model names.
    - It will detail the hybrid architecture (Chainlink + LLM).
3.  Update the Todo List to be concrete.

## 4. Verification
- Read `IMPLEMENTATION_PLAN.md` to ensure the new content is accurate and formatted correctly.
